<!DOCTYPE HTML>
<html lang="zh" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Java Web - 文档</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../linux/index.html"><strong aria-hidden="true">1.</strong> Linux</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../linux/desktop_env/index.html"><strong aria-hidden="true">1.1.</strong> Linux桌面环境</a></li><li class="chapter-item expanded "><a href="../../linux/vsftp/index.html"><strong aria-hidden="true">1.2.</strong> vsftp</a></li><li class="chapter-item expanded "><a href="../../linux/systemd/index.html"><strong aria-hidden="true">1.3.</strong> systemd</a></li></ol></li><li class="chapter-item expanded "><a href="../../windows/index.html"><strong aria-hidden="true">2.</strong> Windows</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../windows/command_prompt/index.html"><strong aria-hidden="true">2.1.</strong> Command Prompt</a></li><li class="chapter-item expanded "><a href="../../windows/wsl2/index.html"><strong aria-hidden="true">2.2.</strong> wsl2</a></li></ol></li><li class="chapter-item expanded "><a href="../../docker/index.html"><strong aria-hidden="true">3.</strong> Docker</a></li><li class="chapter-item expanded "><a href="../../git/index.html"><strong aria-hidden="true">4.</strong> Git</a></li><li class="chapter-item expanded "><a href="../../java/index.html"><strong aria-hidden="true">5.</strong> Java</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../java/java_basics/index.html"><strong aria-hidden="true">5.1.</strong> Java基础</a></li><li class="chapter-item expanded "><a href="../../java/multithreading/index.html"><strong aria-hidden="true">5.2.</strong> 多线程</a></li><li class="chapter-item expanded "><a href="../../java/maven/index.html"><strong aria-hidden="true">5.3.</strong> Maven</a></li><li class="chapter-item expanded "><a href="../../java/gradle/index.html"><strong aria-hidden="true">5.4.</strong> Gradle</a></li><li class="chapter-item expanded "><a href="../../java/design_pattern/index.html"><strong aria-hidden="true">5.5.</strong> 设计模式</a></li><li class="chapter-item expanded "><a href="../../java/java_web/index.html" class="active"><strong aria-hidden="true">5.6.</strong> Java Web</a></li><li class="chapter-item expanded "><a href="../../java/SSM/index.html"><strong aria-hidden="true">5.7.</strong> SSM</a></li><li class="chapter-item expanded "><a href="../../java/project/index.html"><strong aria-hidden="true">5.8.</strong> 项目</a></li><li class="chapter-item expanded "><a href="../../java/shiro/index.html"><strong aria-hidden="true">5.9.</strong> Shiro</a></li><li class="chapter-item expanded "><a href="../../java/netty/index.html"><strong aria-hidden="true">5.10.</strong> Netty</a></li><li class="chapter-item expanded "><a href="../../java/spring/index.html"><strong aria-hidden="true">5.11.</strong> Spring</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../java/spring/spring_security/index.html"><strong aria-hidden="true">5.11.1.</strong> Spring Security</a></li><li class="chapter-item expanded "><a href="../../java/spring/spring_cloud/index.html"><strong aria-hidden="true">5.11.2.</strong> Spring Cloud</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../mysql/index.html"><strong aria-hidden="true">6.</strong> Mysql</a></li><li class="chapter-item expanded "><a href="../../nginx/index.html"><strong aria-hidden="true">7.</strong> Nginx</a></li><li class="chapter-item expanded "><a href="../../redis/index.html"><strong aria-hidden="true">8.</strong> Redis</a></li><li class="chapter-item expanded "><a href="../../vim/index.html"><strong aria-hidden="true">9.</strong> Vim/Neovim</a></li><li class="chapter-item expanded "><a href="../../vue/index.html"><strong aria-hidden="true">10.</strong> Vue</a></li><li class="chapter-item expanded "><a href="../../web/index.html"><strong aria-hidden="true">11.</strong> Web</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">文档</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="javaweb"><a class="header" href="#javaweb">javaweb</a></h1>
<h3 id="webxml里面的头文件信息"><a class="header" href="#webxml里面的头文件信息">web.xml里面的头文件信息</a></h3>
<pre><code class="language-xml">&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee
                      http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;
         version=&quot;4.0&quot;
         metadata-complete=&quot;true&quot;&gt;
&lt;/web-app&gt;
</code></pre>
<h3 id="servletcontext类"><a class="header" href="#servletcontext类">ServletContext类</a></h3>
<pre><code class="language-java">//servlet上下文对象所有servlet程序都可以获取到这个类
ServletContext context = getServletContext();       
</code></pre>
<h4 id="setattribute"><a class="header" href="#setattribute">setAttribute</a></h4>
<pre><code class="language-java">//在该上下对象内存一个对象使servlet程序之间互相通信更加方便
context.setAttribute(&quot;name&quot;, &quot;张三&quot;);
</code></pre>
<h4 id="getinitparameter"><a class="header" href="#getinitparameter">getInitParameter</a></h4>
<ul>
<li>先在web.xml文件里面编写需要的信息</li>
</ul>
<pre><code class="language-xml">&lt;!--    可以配置web应用初始化所首需要的信息--&gt;
&lt;context-param&gt;
    &lt;param-name&gt;url&lt;/param-name&gt;
    &lt;param-value&gt;需要的信息&lt;/param-value&gt;
&lt;/context-param&gt;
</code></pre>
<ul>
<li>然后获取</li>
</ul>
<pre><code class="language-java">//获取在web.xml里面配置的信息
context.getInitParameter(&quot;url&quot;);
</code></pre>
<h4 id="getrequestdispatcher"><a class="header" href="#getrequestdispatcher">getRequestDispatcher</a></h4>
<pre><code class="language-java">//请求转发 将当前servlet获取到的的请求转发到指定的servlet进行处理
context.getRequestDispatcher(&quot;/w&quot;).forward(req, resp);
</code></pre>
<h4 id="maven配置的一个问题"><a class="header" href="#maven配置的一个问题">Maven配置的一个问题</a></h4>
<pre><code class="language-xml">&lt;!--    在build里配置resources,防止支援导出失败的问题--&gt;
&lt;build&gt;
    &lt;resources&gt;
        &lt;resource&gt;
            &lt;directory&gt;src/main/resources&lt;/directory&gt;
            &lt;includes&gt;
                &lt;include&gt;**/*.properties&lt;/include&gt;
                &lt;include&gt;**/*.xml&lt;/include&gt;
            &lt;/includes&gt;
        &lt;/resource&gt;
        &lt;resource&gt;
            &lt;directory&gt;src/main/java&lt;/directory&gt;
            &lt;includes&gt;
                &lt;include&gt;**/*.properties&lt;/include&gt;
                &lt;include&gt;**/*.xml&lt;/include&gt;
            &lt;/includes&gt;
        &lt;/resource&gt;
    &lt;/resources&gt;
&lt;/build&gt;
</code></pre>
<h4 id="getresourceasstream"><a class="header" href="#getresourceasstream">getResourceAsStream</a></h4>
<pre><code class="language-java">//获取当前项目resource目录里面的资源文件
context.getResourceAsStream(&quot;/WEB-INF/classes/info.properties&quot;);
</code></pre>
<h3 id="http响应"><a class="header" href="#http响应">HTTP响应</a></h3>
<ul>
<li>服务器--&gt;响应--&gt;客户端</li>
</ul>
<p>百度：</p>
<pre><code>Cache-Control:private   缓存控制
Connection:Keep-Alive   连接
Content-Encoding:gzip   编码
Content-Type:text/html  类型
</code></pre>
<p>1.响应体</p>
<pre><code>Accept：             告诉浏览器，他支持所有的数据类型
Accept-Encoding：    支持那种编码格式：GBK、UTF-8、GB2312、ISO8895-1
Accept-language：    告诉浏览器语言环境
Cache-Control：      缓存控制
Connection：         告诉浏览器，请求完成后是断开还是保持连接
HOST：               主机
Refersh：            告诉客户端，多久刷新一次
Locatoin：           让网页重新定位
</code></pre>
<ol start="2">
<li>响应的状态码
<ul>
<li>200：请求响应成功</li>
<li>3xx：请求重定向
<ul>
<li>重定向： 你重新到我给你的新位置去</li>
</ul>
</li>
<li>4xx：资源找不到 404
<ul>
<li>资源不存在</li>
</ul>
</li>
<li>5xx：服务器代码错误 500 502：网关错误</li>
</ul>
</li>
</ol>
<p><strong>web服务器接收到客户端的http请求，针对这个请求，分别创建一个代表请求的HttpServletRequest对象，和一个代表响应的HttpServletResponse对象</strong></p>
<ul>
<li>如果要获取客户端请求过来的参数：找HttpServletRequest</li>
<li>如果要给客户端响应一些数据：找HttpServletResponse</li>
</ul>
<h3 id="httpservletresponse"><a class="header" href="#httpservletresponse">HttpServletResponse</a></h3>
<p><strong>负责向浏览器发送数据的方法</strong></p>
<pre><code class="language-java">public ServletOutputStream getOutputStream() throws IOException;
public PrintWriter getWriter() throws IOException;
</code></pre>
<p><strong>负责向浏览器发送响应头的方法</strong></p>
<pre><code class="language-java">public void setCharacterEncoding(String charset);
public void setContentLength(int len);
public void setContentLengthLong(long len);
public void setContentType(String type);
public void setDateHeader(String name, long date);
public void addDateHeader(String name, long date);
public void setHeader(String name, String value);
public void addHeader(String name, String value);
public void setIntHeader(String name, int value);
public void addIntHeader(String name, int value);
</code></pre>
<p>####功能</p>
<ol>
<li>
<p>向页面输出信息	</p>
</li>
<li>
<p>下载文件</p>
</li>
</ol>
<pre><code class="language-java">//获取文件路径
String realPath = getServletContext().getRealPath(&quot;/WEB-INF/classes/张三.png&quot;);
//获取文件名
String fileName = realPath.substring(realPath.lastIndexOf(&quot;\\&quot;) + 1);
//设置响应头文件名需要进行重新编码
resp.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + URLEncoder.encode(fileName, &quot;UTF-8&quot;));
//获取输入流
FileInputStream fis = new FileInputStream(realPath);
//获取输出流
ServletOutputStream os = resp.getOutputStream();
//输出操作
byte[] buffer = new byte[1024];
int len = 0;
while ((len = fis.read(buffer)) &gt; 0){
    os.write(buffer, 0, len);
    os.flush();
}
//关闭流
fis.close();
os.close();
</code></pre>
<ol start="3">
<li>验证码功能</li>
</ol>
<pre><code class="language-java">//设置页面每过5秒刷新一次
resp.setHeader(&quot;Refresh&quot;, &quot;5&quot;);
//创建一张图片
BufferedImage bi = new BufferedImage(200, 70, BufferedImage.TYPE_INT_RGB);
//获取画笔
Graphics2D graphics = (Graphics2D) bi.getGraphics();
//设置画笔颜色
graphics.setColor(Color.WHITE);
//填充背景颜色
graphics.fillRect(0, 0, 200, 80);
//再次设置画笔颜色
graphics.setColor(Color.BLUE);
//设置字体类型
graphics.setFont(new Font(null, Font.BOLD, 30));
//画上一个字符串
graphics.drawString(getVerification(), 40, 40);
//设置浏览器打开的格式
resp.setHeader(&quot;Content-Type&quot;, &quot;image/png&quot;);
//不让网站缓存
resp.setDateHeader(&quot;expires&quot;, -1);
resp.setHeader(&quot;Cache-Control&quot;, &quot;no-cache&quot;);
resp.setHeader(&quot;Pragma&quot;, &quot;no-cache&quot;);
//把图片写给浏览器
ImageIO.write(bi, &quot;png&quot;, resp.getOutputStream());
</code></pre>
<p>4.实现重定向</p>
<p>一个web资源收到客户端请求后，它会通知客户端去访问另一个web资源，这个过程叫重定向</p>
<pre><code class="language-java">/*重定向
        相当于：
        resp.setHeader(&quot;Location&quot;, &quot;/st/img&quot;);
        resp.setStatus(302);*/
resp.sendRedirect(&quot;/st/img&quot;);
</code></pre>
<h3 id="httpservletrequest"><a class="header" href="#httpservletrequest">HttpServletRequest</a></h3>
<p>HttpServletRequest代表客户端的请求，用户通过http协议访问服务器，http请求的所有信息会被封装到HttpServletRequest，
通过HttpServletRequest里面的方法，获得客户端的所有信息</p>
<p>1.获取前端传递的参数</p>
<pre><code class="language-java">//获取一个参数
public String getParameter(String name);
//获取一组参数
public String[] getParameterValues(String name);
</code></pre>
<p>2.请求转发</p>
<pre><code class="language-java">//转发
public RequestDispatcher getRequestDispatcher(String path);
</code></pre>
<ul>
<li>重定向和转发的区别
<ul>
<li>相同点：
<ul>
<li>页面都会实现跳转</li>
</ul>
</li>
<li>不同点：
<ul>
<li>请确转发是url不会发生变化 307</li>
<li>重定向url会改变 302</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="cookiesession"><a class="header" href="#cookiesession">Cookie、Session</a></h3>
<h4 id="会话"><a class="header" href="#会话">会话</a></h4>
<ul>
<li>会话：用户打开一个浏览器，点击了很多超链接，访问了多个web资源，关闭浏览器，这个过程称为会话 </li>
<li>有状态会话：一个同学来过教室，下次再来教室，我们知道它曾经来过这成为有状态会话</li>
<li>一个网站，怎么证明你来过
<ul>
<li>服务端给客户端一个信件，客户端下次访问服务端时带上信件就可以了 cookie</li>
<li>服务端登记你来过，下次来的时候进行匹配 session</li>
</ul>
</li>
</ul>
<h4 id="保存会话的两种技术"><a class="header" href="#保存会话的两种技术">保存会话的两种技术</a></h4>
<ul>
<li>cookie
<ul>
<li>客户端技术（响应、请求）</li>
</ul>
</li>
<li>session
<ul>
<li>服务器技术，利用这个技术可以保存用户的会话信息，我们可以把信息或数据存在session中</li>
</ul>
</li>
</ul>
<p>常见应用：网站登录后，下一次不需要登录，直接访问</p>
<h4 id="cookie"><a class="header" href="#cookie">Cookie</a></h4>
<p>1.从请求中拿到cookie信息
2.服务器响应给客户端的cookie</p>
<pre><code class="language-java">//获得cookie
req.getCookies();
//获得cookie里面的键
cookie.getName();
//获得cookie里面的值
cookie.getValue();
//创建cookie
new Cookie(key, value);
//设置cookie的有效期
cookie.setMaxAge(时间);
//给客户端响应一个cookie
resp.addCookie(目标cookie);   
</code></pre>
<p>cookie文件一般会保存在用户目录下的appdata文件夹里面</p>
<ul>
<li>
<p>一个网站的cookie是否存在上限</p>
<ul>
<li>一个cookie只能保存一个信息</li>
<li>一个web站点可以给浏览器发送多个cookie，最多存放20个cookie</li>
<li>cookie大小有限制20kb</li>
<li>cookie的浏览器上限未300个</li>
</ul>
</li>
<li>
<p>删除cookie</p>
<ul>
<li>不设置cookie的有效期，关闭浏览器后cookie自动失效</li>
<li>给cookie设置有效期为0</li>
</ul>
</li>
<li>
<p>编码解码</p>
</li>
</ul>
<pre><code class="language-java">    //编码
    URLEncoder.encode(目标字符串, charset);
    //解码
    URLDecoder.decode(目标字符串, charset)
</code></pre>
<h4 id="session"><a class="header" href="#session">Session</a></h4>
<ul>
<li>
<p>什么是session</p>
<ul>
<li>服务器会给每个用户（浏览器）创建一个session对象</li>
<li>一个session独占一个浏览器，只要浏览器没有关闭，这个session就存在</li>
<li>用户登录后整个网站都可以访问  保存用户信息、保存购物车信息等</li>
</ul>
</li>
<li>
<p>session和cookie的区别</p>
<ul>
<li>cookie是把用户的数据写给用户的浏览器，浏览器保存（可以保存多个）</li>
<li>session把用户的数据写到用户独占的session里，服务端保存（保存重要的信息，避免服务器资源浪费）</li>
<li>session对象由服务器创建</li>
</ul>
</li>
<li>
<p>使用session</p>
</li>
</ul>
<pre><code class="language-java">//获取session
req.getSession();
//给session内存数据
session.setAttribute(key, value);
//获取session的id
session.getId();
//判断session是不是新创建的
session.isNew();
/*
    session创建的时候会把session的id放入cookie内，响应个客户端
    resp.addCookie(new Cookie(&quot;JSESSIONID&quot;, session.getId()));    
*/  
//移除session里面的数据
session.removeAttribute(&quot;数据对应的key&quot;);
//手动注销session
session.invalidate();
</code></pre>
<ul>
<li>设置session的过期时间，在web.xml里面配置</li>
</ul>
<pre><code class="language-xml">&lt;session-config&gt;
    &lt;session-timeout&gt;时间单位为分钟&lt;/session-timeout&gt;
&lt;/session-config&gt;
</code></pre>
<h3 id="jsp"><a class="header" href="#jsp">JSP</a></h3>
<ul>
<li>什么是JSP
<ul>
<li>Java Server Pages: java服务器端页面，也和Servlet一样，用于动态web技术</li>
<li>特点
<ul>
<li>写jsp就像是在写Html代码</li>
<li>区别;
<ul>
<li>HTML只给用户提供静态数据</li>
<li>jsp页面中可以嵌入java代码，为用户提供动态数据</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>JSP原理
<ul>
<li>jsp是怎么执行的
<ul>
<li>代码层面没有任何问题</li>
<li>服务器内部工作
<ul>
<li>tomcat中有一个work目录</li>
<li>IDEA使用tomcat会在tomcat中生成一个work目录（在C盘用户目录下idea配置文件里面）</li>
<li>C:\Users\yf.IntelliJIdea2019.3\system\tomcat\Unnamed_projectTest\work\Catalina\localhost\st\org\apache\jsp</li>
</ul>
</li>
<li>浏览器不论访问什么资源，都是在访问Servlet
<ul>
<li>jsp最终会被转换为一个java类</li>
<li>jsp本质上就是一个servlet</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code class="language-java">//初始化
public void _jspInit() {
}
//销毁
public void _jspDestroy() {
}
//jspservice
public void _jspService(HttpServletRequest request, HttpServletResponse response){
}
</code></pre>
<ol>
<li>请求判断</li>
<li>内置的一些对象</li>
</ol>
<pre><code class="language-java">    final javax.servlet.jsp.PageContext pageContext;    //页面上下文   
    javax.servlet.http.HttpSession session = null;      //session
    final javax.servlet.ServletContext application;     //applicationContext
    final javax.servlet.ServletConfig config;           //config
    javax.servlet.jsp.JspWriter out = null;             //out
    final java.lang.Object page = this;                 //当前页面
    HttpServletRequest request                          //请求
    HttpServletResponse response                        //响应     
</code></pre>
<ol start="3">
<li>页面输出前增加的代码</li>
</ol>
<pre><code class="language-java">      response.setContentType(&quot;text/html;charset=UTF-8&quot;);       //设置相应页面的类型
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;
</code></pre>
<h3 id="jsp语法"><a class="header" href="#jsp语法">JSP语法</a></h3>
<ul>
<li>jsp表达式</li>
</ul>
<pre><code class="language-jsp">输出到客户端
&lt;%= 变量或表达式%&gt;
</code></pre>
<ul>
<li>jsp脚本片段</li>
</ul>
<pre><code class="language-jsp">&lt;%java代码%&gt;
</code></pre>
<ul>
<li>jsp声明</li>
</ul>
<pre><code class="language-jsp">&lt;%!字段、方法、代码块%&gt;
</code></pre>
<ul>
<li>jsp标签</li>
</ul>
<pre><code>拼接页面
//将导入的页面与当前页面和二为一
//会导致多个页面里定义的变量冲突
&lt;%@include file=路径%&gt;
//页面拼接，本质上还是多个页面
&lt;jsp:include page=路径/&gt;
</code></pre>
<ul>
<li>9大内置对象
<ul>
<li>PageContext</li>
<li>Request</li>
<li>Response</li>
<li>Session</li>
<li>Application 就是ServletContext</li>
<li>config</li>
<li>out</li>
<li>page</li>
<li>exception</li>
</ul>
</li>
<li>四大域里面保存的数据的范围</li>
</ul>
<pre><code>    //保存的数据，只存在当前页面有效
    pageContext.setAttribute(&quot;key01&quot;, &quot;value01&quot;);
    //保存的数据，在请求中有效，请求转发1会携带这个数据
    request.setAttribute(&quot;key02&quot;, &quot;value02&quot;);
    //保存的数据，在一次会话中有效，从打开浏览器到关闭浏览器
    session.setAttribute(&quot;key03&quot;, &quot;value03&quot;);
    //保存的数据，在服务器中有效，从打开服务器到关闭服务器
    application.setAttribute(&quot;key04&quot;, &quot;value04&quot;);
</code></pre>
<h3 id="mvc三层架构"><a class="header" href="#mvc三层架构">MVC三层架构</a></h3>
<p>MVC：Model、View、Controller，模型、视图、控制器</p>
<ul>
<li>早些年：
<ul>
<li>用户直接访问控制层，控制层就可以直接操作数据库</li>
<li>servlet--&gt;CRUD--&gt;数据库</li>
<li>弊端：
<ul>
<li>程序臃肿、不利于维护</li>
<li>servlet的代码中：处理请求、响应、视图跳转、处理JDBC、处理业务代码、处理逻辑代码</li>
</ul>
</li>
</ul>
</li>
<li>MVC三层架构
<ul>
<li>Model
<ul>
<li>业务处理：业务逻辑（service）</li>
<li>数据持久层：CRUD（Dao）</li>
</ul>
</li>
<li>View
<ul>
<li>展示数据</li>
<li>提供链接发起servlet请求</li>
</ul>
</li>
<li>Controller
<ul>
<li>接收用户的请求：（request的请求参数、session信息）</li>
<li>交给业务层处理对应的代码</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="filter"><a class="header" href="#filter">Filter</a></h3>
<ol>
<li>编写过滤器</li>
</ol>
<pre><code class="language-java">public class CharacterFilter implements Filter {
    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        request.setCharacterEncoding(&quot;UTF-8&quot;);
        response.setCharacterEncoding(&quot;UTF-8&quot;);
        response.setContentType(&quot;text/html;charset=utf-8&quot;);

        System.out.println(&quot;过滤前&quot;);
        chain.doFilter(request, response);
        System.out.println(&quot;过滤后&quot;);
    }
}
</code></pre>
<ol start="2">
<li>web.xml下配置</li>
</ol>
<pre><code class="language-xml">    &lt;filter&gt;
            &lt;filter-name&gt;CharacterFilter&lt;/filter-name&gt;
            &lt;filter-class&gt;com.hb.filter.CharacterFilter&lt;/filter-class&gt;
        &lt;/filter&gt;
        &lt;filter-mapping&gt;
            &lt;filter-name&gt;CharacterFilter&lt;/filter-name&gt;
            &lt;url-pattern&gt;/service/*&lt;/url-pattern&gt;
        &lt;/filter-mapping&gt;
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../java/design_pattern/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../java/SSM/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../java/design_pattern/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../java/SSM/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
