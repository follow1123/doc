{"version":3,"file":"js/135.4562bec2.js","mappings":"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","sources":["webpack://home-page/./src/views/search.vue","webpack://home-page/./src/config/searchConf.js","webpack://home-page/src/views/search.vue","webpack://home-page/./src/views/search.vue?bbef","webpack://home-page/./src/views/search.vue?f108"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-row',{staticStyle:{\"height\":\"100vh\"},attrs:{\"type\":\"flex\",\"justify\":\"center\",\"align\":\"top\"}},[_c('el-col',{attrs:{\"span\":6}}),_c('el-col',{attrs:{\"span\":12}},[_c('el-row',{staticStyle:{\"height\":\"20vh\"},attrs:{\"type\":\"flex\",\"justify\":\"center\",\"align\":\"top\"}}),_c('el-input',{ref:\"inp\",attrs:{\"type\":\"text\",\"autocomplete\":\"off\"},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.inputKeysListener.apply(null, arguments)}},model:{value:(_vm.searchContent),callback:function ($$v) {_vm.searchContent=$$v},expression:\"searchContent\"}})],1),_c('el-col',{attrs:{\"span\":6}},[_c('el-row',{staticStyle:{\"height\":\"100vh\"},attrs:{\"type\":\"flex\",\"justify\":\"center\",\"align\":\"top\"}},[_c('el-col',{attrs:{\"span\":18}}),_c('el-col',{attrs:{\"span\":6,\"type\":\"flex\",\"justify\":\"center\",\"align\":\"top\"}},[_c('div'),_c('el-button',{attrs:{\"icon\":\"el-icon-refresh-right\",\"title\":\"刷新配置\",\"circle\":\"\"},on:{\"click\":_vm.reloadSearchConfig}})],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default {\r\n    searchConfItems: [\r\n        {\r\n            name: \"百度\",\r\n            url: \"https://www.baidu.com/s?wd=\",\r\n            keys: []\r\n        },\r\n        {\r\n            name: \"必应\",\r\n            url: \"https://cn.bing.com/search?q=\",\r\n            keys: [\"control\"]\r\n        },\r\n        {\r\n            name: \"爆栈\",\r\n            url: \"https://stackoverflow.com/search?q=\",\r\n            keys: [\"control\", \"alt\"]\r\n        },\r\n        {\r\n            name: \"github\",\r\n            url: \"https://github.com/search?q=\",\r\n            keys: [\"control\", \"shift\"]\r\n        },\r\n        {\r\n            name: \"maven\",\r\n            url: \"https://mvnrepository.com/search?q=\",\r\n            keys: [\"alt\", \"1\"]\r\n        },\r\n        {\r\n            name: \"crates\",\r\n            url: \"https://crates.io/search?q=\",\r\n            keys: [\"alt\", \"2\"]\r\n        },\r\n        {\r\n            name: \"docker\",\r\n            url: \"https://hub.docker.com/search?q=\",\r\n            keys: [\"alt\", \"3\"]\r\n        }\r\n    ],\r\n    keyWeightMap:{\r\n        \"control\": 2,\r\n        \"shift\": 4,\r\n        \"alt\": 8,\r\n        \"1\": 16,\r\n        \"2\": 32,\r\n        \"3\": 64,\r\n        \"4\": 128,\r\n        \"5\": 256,\r\n        \"6\": 512,\r\n        \"7\": 1024,\r\n        \"8\": 2048,\r\n        \"9\": 4096,\r\n        \"0\": 8192,\r\n    }\r\n}\r\n\r\n// VM1032:2 2\r\n// VM1032:2 4\r\n// VM1032:2 8\r\n// VM1032:2 16\r\n// VM1032:2 32\r\n// VM1032:2 64\r\n// VM1032:2 128\r\n// VM1032:2 256\r\n// VM1032:2 512\r\n// VM1032:2 1024\r\n// VM1032:2 2048\r\n// VM1032:2 4096\r\n// VM1032:2 8192","<template>\r\n    <el-row type=\"flex\" justify=\"center\" align=\"top\" style=\"height: 100vh\">\r\n        <el-col :span=\"6\">\r\n        </el-col>\r\n        <el-col :span=\"12\">\r\n            <el-row type=\"flex\" justify=\"center\" align=\"top\" style=\"height: 20vh\">\r\n            </el-row>\r\n            <el-input ref=\"inp\" @keydown.enter.native=\"inputKeysListener\" v-model=\"searchContent\" type=\"text\" \r\n            autocomplete=\"off\"></el-input>\r\n        </el-col>\r\n        <el-col :span=\"6\">\r\n            <el-row type=\"flex\" justify=\"center\" align=\"top\" style=\"height: 100vh\">\r\n                <el-col :span=\"18\">\r\n                </el-col>\r\n                <el-col :span=\"6\"  type=\"flex\" justify=\"center\" align=\"top\">\r\n                    <div></div>\r\n                    <el-button icon=\"el-icon-refresh-right\" title=\"刷新配置\" @click=\"reloadSearchConfig\" circle></el-button>\r\n                </el-col>\r\n            </el-row>\r\n        </el-col>\r\n    </el-row>\r\n</template>\r\n<script>\r\nimport searchConf from '@/config/searchConf.js'\r\nexport default {\r\n    name: \"Search\",\r\n    data() {\r\n        return {\r\n            // 搜索内容\r\n            searchContent: '',\r\n            // 搜索配置\r\n            searchMetadata: {},\r\n            keyWeights: 1,\r\n            keyWeightMap: {},\r\n        }\r\n    },\r\n    methods: {\r\n        // 监听input的enter键\r\n        inputKeysListener(event) {\r\n            if(!this.searchContent || this.searchContent.toString().trim() === ''){\r\n                this.$message({\r\n                    message: '请输入问题',\r\n                    type: 'warning'\r\n                });\r\n                return;\r\n            }\r\n            console.log(this.searchMetadata);\r\n            if(this.searchMetadata.hasOwnProperty(this.keyWeights)){\r\n                var url = this.searchMetadata[this.keyWeights].url;\r\n                window.open(`${url}${this.searchContent}`, \"_self\")\r\n            }\r\n        },\r\n        // 重新加载搜索配置\r\n        reloadSearchConfig(){\r\n            localStorage.removeItem('searchMetadata');\r\n            this.loadSearchConfig();\r\n        },\r\n\r\n        // 从本地配置内解析搜索配置\r\n        loadSearchConfigByLocalConfig(){\r\n            // 获取本地的配置文件\r\n            var localSearchConfig = localStorage.getItem('searchConfig');\r\n            if(!localSearchConfig || localSearchConfig == ''){\r\n                // 获取源码内的配置文件\r\n                localSearchConfig = searchConf.searchConfItems;\r\n            }else{\r\n                localSearchConfig = JSON.parse(localSearchConfig);\r\n            }\r\n            var sMetaData = {};\r\n            localSearchConfig.forEach(item => {\r\n                var keyWeight = item.keys.reduce((sum, key) => {\r\n                    if(this.keyWeightMap.hasOwnProperty(key)){\r\n                        return sum + this.keyWeightMap[key].weight;\r\n                    }else{\r\n                        var msg = `无效按键配置，不支持${key}`;\r\n                        this.$message({\r\n                            message: msg,\r\n                            type: 'warning'\r\n                        });\r\n                        throw msg\r\n                    }\r\n                }, 1)\r\n                if(sMetaData.hasOwnProperty(keyWeight)){\r\n                    var msg = `按键配置重复，${item.name}`;\r\n                    this.$message({\r\n                        message: msg,\r\n                        type: 'warning'\r\n                    });\r\n                    throw msg\r\n                }\r\n                sMetaData[keyWeight] = {\r\n                    ...item,\r\n                }\r\n            })\r\n            localStorage.setItem('searchConfig', JSON.stringify(localSearchConfig))\r\n            return sMetaData;\r\n        },\r\n\r\n        // 加载网址按键配置\r\n        loadSearchConfig(){\r\n            // 获取本地搜索配置\r\n            var sMetadata = localStorage.getItem('searchMetadata');\r\n            if(sMetadata && sMetadata != ''){\r\n                this.searchMetadata = JSON.parse(sMetadata);\r\n            }else{\r\n                this.searchMetadata = this.loadSearchConfigByLocalConfig();\r\n                localStorage.setItem('searchMetadata', JSON.stringify(this.searchMetadata));\r\n            }\r\n        },\r\n        initKeyWeightMap(){\r\n            for(var fieldName in searchConf.keyWeightMap){\r\n                this.keyWeightMap[fieldName] = {\r\n                    available: true,\r\n                    weight: searchConf.keyWeightMap[fieldName]\r\n                }\r\n            }\r\n        }\r\n    },\r\n    activated() {\r\n        this.initKeyWeightMap();\r\n        this.loadSearchConfig();\r\n        window.onblur = () =>{\r\n            this.keyWeights = 1;\r\n        }\r\n        document.onkeydown = (event) => {\r\n            var curKey = event.key.toLowerCase();\r\n            if(this.keyWeightMap.hasOwnProperty(curKey)){\r\n                var curKeyWeight = this.keyWeightMap[curKey];\r\n                console.log(curKeyWeight);\r\n                if(!curKeyWeight.available) return;\r\n                // this.$message({\r\n                //             message: `按下：${curKeyWeight.key} - ${curKeyWeight.weight}`,\r\n                //             type: 'info'\r\n                //         });\r\n                this.keyWeights += curKeyWeight.weight;\r\n                curKeyWeight.available = false;\r\n                // this.$message({\r\n                //             message: `权重：${this.keyWeights}`,\r\n                //             type: 'info'\r\n                //         });\r\n            }\r\n            // this.$message({\r\n            //                 message: `权重：${this.keyWeights}`,\r\n            //                 type: 'info'\r\n            //             });\r\n            console.log(this.keyWeights);\r\n        }\r\n        document.onkeyup = (event) => {\r\n            var curKey = event.key.toLowerCase();\r\n            if(this.keyWeightMap.hasOwnProperty(curKey)){\r\n                var curKeyWeight = this.keyWeightMap[curKey];\r\n                console.log(curKeyWeight);\r\n                if(curKeyWeight.available) return;\r\n                // this.$message({\r\n                //             message: `抬起：${curKeyWeight.key} - ${curKeyWeight.weight}`,\r\n                //             type: 'info'\r\n                //         });\r\n                this.keyWeights -= curKeyWeight.weight;\r\n                curKeyWeight.available = true;\r\n                // this.$message({\r\n                //             message: `权重：${this.keyWeights}`,\r\n                //             type: 'info'\r\n                //         });\r\n            }\r\n            console.log(this.keyWeights);\r\n        }\r\n        // 默认获取焦点\r\n        this.$refs.inp.focus();\r\n    },\r\n    created(){\r\n        this.keyWeights = 1;\r\n    }\r\n}\r\n</script>\r\n<style>\r\n.el-input__inner {\r\n    border-radius: 16px;\r\n    border: 3px solid #DCDFE6;\r\n    height: 48px;\r\n    font-size: large;\r\n}\r\n.el-button{\r\n    border: 0;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search.vue?vue&type=template&id=73c42a65&\"\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search.vue?vue&type=style&index=0&id=73c42a65&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticStyle","attrs","ref","nativeOn","$event","type","indexOf","_k","keyCode","key","inputKeysListener","apply","arguments","model","value","searchContent","callback","$$v","expression","on","reloadSearchConfig","staticRenderFns","searchConfItems","name","url","keys","keyWeightMap","data","searchMetadata","keyWeights","methods","console","window","message","localStorage","loadSearchConfigByLocalConfig","localSearchConfig","sMetaData","loadSearchConfig","initKeyWeightMap","available","weight","activated","document","curKeyWeight","created","component"],"sourceRoot":""}